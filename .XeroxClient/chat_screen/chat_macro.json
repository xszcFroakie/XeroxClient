// File made by @XSzC.
// Secondary distribution must follow the GPL-3.0-only Protocol!!
{
  "namespace": "xc_modern_chat:chat_macro",

  // Inspired by RainbowPie

  "command_text": {
    "type": "edit_box",
    "focus_enabled": true,
    "enabled_newline": true,
    "max_length": 32767,
    "button_mappings": [
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "button.text_edit_box_selected",
        "handle_select": true,
        "handle_deselect": false,
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "button.text_edit_box_selected",
        "handle_select": false,
        "handle_deselect": true,
        "mapping_type": "global",
        "consume_event": false
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "button.text_edit_box_selected",
        "handle_select": true,
        "handle_deselect": false,
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_cancel",
        "to_button_id": "button.text_edit_box_deselected",
        "handle_select": false,
        "handle_deselect": true,
        "mapping_type": "global"
      },
      {
        "to_button_id": "button.text_edit_box_hovered",
        "mapping_type": "pressed"
      }
    ]
  },

  "macro_button": {
    "type": "panel",
    "$macro_command|default": "macro",
    "$macro_command_control|default": "",
    "$macro_button_text|default": "",
    "$macro_button_content|default": "common.empty_panel",
    "$macro_auto_send|default": true,
    "$macro_button_type|default": "common_buttons.a_rc_8x_text",
    "controls": [
      {
        "command_button@$macro_button_type": {
          "$pressed_button_name": "button.send",
          "$button_text": "$macro_button_text",
          "$button_content": "$macro_button_content",
          "size": ["100%", "100%"],
          "layer": 1,
          "variables": [
            {
              "requires": "(not $macro_auto_send)",
              "$pressed_button_name": "xcMacro.send"
            }
          ]
        }
      },
      {
        "deselect_text_box": {
          "type": "input_panel",
          "size": ["100%", "100%"],
          "consume_hover_events": false,
          "layer": 5,
          "button_mappings": [
            {
              "from_button_id": "button.menu_select",
              "to_button_id": "button.text_edit_box_deselected",
              "mapping_type": "pressed"
            },
            {
              "from_button_id": "button.menu_ok",
              "to_button_id": "button.text_edit_box_deselected",
              "mapping_type": "pressed"
            }
          ],
          "bindings": [
            {
              "binding_name": "#keyboard_being_used",
              "binding_name_override": "#visible"
            }
          ]
        }
      },
      {
        "command_text@xc_modern_chat:chat_macro.command_text": {
          "size": ["100%", "100%"],
          "text_box_name": "#message_text_box",
          "text_control": "command_text_control",
          "consume_hover_events": false,
          "layer": 4,
          "button_mappings": [
            {
              "from_button_id": "button.menu_select",
              "to_button_id": "button.keyboard_toggle",
              "mapping_type": "pressed",
              "consume_event": false
            },
            {
              "from_button_id": "button.menu_ok",
              "to_button_id": "button.keyboard_toggle",
              "mapping_type": "pressed",
              "consume_event": false
            }
          ],
          "controls": [
            {
              "command_text_control": {
                "type": "label",
                "text": "#item_name",
                "visible": false,
                "property_bag": {
                  "#command": "$macro_command",
                  "#property_field": "#item_name"
                },
                "bindings": [
                  {
                    "binding_type": "view",
                    "source_property_name": "#command",
                    "target_property_name": "#item_name",
                    "ignored": "(not ($macro_command_control = ''))"
                  },
                  {
                    "binding_type": "view",
                    "source_control_name": "$macro_command_control",
                    "source_property_name": "#item_name",
                    "target_property_name": "#item_name",
                    "ignored": "($macro_command_control = '')"
                  }
                ]
              }
            }
          ]
        }
      }
    ]
  },

  "macro_buttons": {
    "type": "image",
    "texture": "textures/XeroxClient/rounded_corner/all8x",
    "color": "$xeroxclient_ui_theme_menu_background_color",
    "alpha": "$xeroxclient_ui_theme_menu_background_alpha",
    "size": ["100%c + 2px", "100%c + 2px"],
    "controls": [
      {
        "stack_1": {
          "type": "stack_panel",
          "size": ["100%c", 25],
          "orientation": "horizontal",
          "$button_hover_tip": true,
          "controls": [
            {
              "gm_cr@xc_modern_chat:chat_macro.macro_button": {
                "$macro_button_type": "common_buttons.a_rc_8x_content",
                "size": [25, 25],
                "$macro_command": "/gamemode creative",
                "$macro_button_content": "xc_modern_chat:chat_macro.cr_icon",
                "$button_hover_tip_text": "gameMode.creative"
              }
            },
            {
              "gm_su@xc_modern_chat:chat_macro.macro_button": {
                "$macro_button_type": "common_buttons.a_rc_8x_content",
                "size": [25, 25],
                "$macro_command": "/gamemode survival",
                "$macro_button_content": "xc_modern_chat:chat_macro.su_icon",
                "$button_hover_tip_text": "gameMode.survival"
              }
            },
            {
              "gm_ad@xc_modern_chat:chat_macro.macro_button": {
                "$macro_button_type": "common_buttons.a_rc_8x_content",
                "size": [25, 25],
                "$macro_command": "/gamemode adventure",
                "$macro_button_content": "xc_modern_chat:chat_macro.ad_icon",
                "$button_hover_tip_text": "gameMode.adventure"
              }
            },
            {
              "gm_sp@xc_modern_chat:chat_macro.macro_button": {
                "$macro_button_type": "common_buttons.a_rc_8x_content",
                "size": [25, 25],
                "$macro_command": "/gamemode spectator",
                "$macro_button_content": "xc_modern_chat:chat_macro.sp_icon",
                "$button_hover_tip_text": "gameMode.spectator"
              }
            }
          ],
          "bindings": [
            {
              "binding_name": "#cheats_on",
              "binding_name_override": "#visible"
            }
          ]
        }
      }
    ]
  },

  "cr_icon@xc_common.item_renderer": {
    "size": [16, 16],
    "$item_id_aux": 131072
  },

  "su_icon@xc_common.item_renderer": {
    "size": [16, 16],
    "$item_id_aux": 21692416
  },

  "ad_icon@xc_common.item_renderer": {
    "size": [16, 16],
    "$item_id_aux": 35979266
  },

  "sp_icon@xc_common.item_renderer": {
    "size": [16, 16],
    "$item_id_aux": 30146560
  }
}
// ▒██   ██▒  ██████ ▒███████▒ ▄████▄
// ▒▒ █ █ ▒░▒██    ▒ ▒ ▒ ▒ ▄▀░▒██▀ ▀█
// ░░  █   ░░ ▓██▄   ░ ▒ ▄▀▒░ ▒▓█    ▄
//  ░ █ █ ▒   ▒   ██▒  ▄▀▒   ░▒▓▓▄ ▄██▒
// ▒██▒ ▒██▒▒██████▒▒▒███████▒▒ ▓███▀ ░
// ▒▒ ░ ░▓ ░▒ ▒▓▒ ▒ ░░▒▒ ▓░▒░▒░ ░▒ ▒  ░
// ░░   ░▒ ░░ ░▒  ░ ░░░▒ ▒ ░ ▒  ░  ▒
//  ░    ░  ░  ░  ░  ░ ░ ░ ░ ░░
//  ░    ░        ░    ░ ░    ░ ░
//                   ░        ░
